import{r as a,j as e}from"./index-DDNRAAbC.js";const l="https://script.google.com/macros/s/AKfycbzkrLj5kD6dX5on-oQ_2aMPJYfx3rnRZktGhdzLnwRbkYLAr6JzbBm9JQZ2sTB9uU0_Mw/exec";function m(){const[r,j]=a.useState([]),[x,h]=a.useState(!0);async function c(){h(!0);const n=await(await fetch(`${l}?action=getOrders`)).json();j(Array.isArray(n.data)?n.data:[]),h(!1)}a.useEffect(()=>{c()},[]);async function i(t,n,s,d,o){await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateStatus",rowIndex:t,status:n})}),n==="Approved"&&(await p(s,d,o),await u(s,d,o)),c()}async function p(t,n,s){const d=`Hello ${n}, your order for ${s} has been Approved. - Santhosh Mobiles`;await fetch("https://your-whatsapp-provider.com/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:"712899145",to:t,message:d})})}async function u(t,n,s){const d=`Order Approved: ${s}. Thank you - Santhosh Mobiles`;await fetch("https://your-sms-provider.com/sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:"712899145",phone:t,message:d})})}return x?e.jsx("p",{children:"Loading orders..."}):e.jsxs("div",{style:{padding:20},children:[e.jsx("h2",{children:"ðŸ“¦ Santhosh Mobiles â€“ Admin Order Dashboard"}),r.length===0&&e.jsx("p",{children:"No Orders Found"}),r.length>0&&e.jsxs("table",{border:"1",cellPadding:"6",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"UPI ID"}),e.jsx("th",{children:"Transaction ID"}),e.jsx("th",{children:"Screenshot"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:r.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(t[0]).toLocaleString()}),e.jsx("td",{children:t[1]}),e.jsx("td",{children:t[2]}),e.jsx("td",{children:t[3]}),e.jsx("td",{children:t[4]}),e.jsx("td",{children:t[5]}),e.jsxs("td",{children:["â‚¹",t[6]]}),e.jsx("td",{children:t[7]}),e.jsx("td",{children:t[8]}),e.jsx("td",{children:t[9]?e.jsx("a",{href:t[9],target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:t[9],width:"60",alt:"Screenshot"})}):"No Image"}),e.jsx("td",{children:t[10]}),e.jsx("td",{children:e.jsxs("select",{defaultValue:t[11],onChange:s=>i(n,s.target.value,t[2],t[1],t[5]),children:[e.jsx("option",{value:"Pending Verification",children:"Pending Verification"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Denied",children:"Denied"})]})}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>i(n,"Approved",t[2],t[1],t[5]),children:"Approve"}),e.jsx("br",{}),e.jsx("button",{onClick:()=>i(n,"Denied",t[2],t[1],t[5]),children:"Deny"})]})]},n))})]})]})}export{m as default};
